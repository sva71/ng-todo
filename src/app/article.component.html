<mat-expansion-panel #panel class="me-5 mt-5 p-3" style="max-width: 400px;">
    <mat-expansion-panel-header class="h-auto pt-2">
        <div class="d-flex flex-column me-3">
            <div class="d-flex flex-row align-items-center">
                <mat-icon class="mb-2" role="button"
                          [matMenuTriggerFor]="actionsMenu"
                          [matMenuTriggerData]="{ index: -1 }"
                          (click)="$event.stopPropagation()"
                >
                    more_vert
                </mat-icon>
                <span class="mb-2 ms-2 fs-4 fw-bold">{{ article.title }}</span>
            </div>
            <mat-divider></mat-divider>
            <div *ngIf="!panel.expanded" class="mt-3">
                <div *ngFor="let todoItem of list2; let i = index">
                    <div class="d-flex flex-row justify-content-start align-items-center">
                        <mat-icon role="button" class="overflow-visible"
                                  [matMenuTriggerFor]="actionsMenu"
                                  [matMenuTriggerData]="{ index: i }"
                                  (click)="$event.stopPropagation()"
                        >
                            more_vert
                        </mat-icon>
                        <mat-checkbox [checked]="todoItem.done"
                                      (change)="changeItemStatus(i)"
                                      (click)="$event.stopPropagation()">
                        </mat-checkbox>
                        <span role="button">{{ todoItem.text }}</span>
                    </div>
                </div>
            </div>
        </div>
    </mat-expansion-panel-header>
    <div class="mt-3">
        <div *ngFor="let todoItem of article.list; let i = index">
            <div class="d-flex flex-row justify-content-start align-items-center">
                <mat-icon role="button" class="overflow-visible"
                          [matMenuTriggerFor]="actionsMenu"
                          [matMenuTriggerData]="{ index: i }"
                >
                    more_vert
                </mat-icon>
                <mat-checkbox [checked]="todoItem.done"
                              (change)="changeItemStatus(i)"
                              (click)="$event.stopPropagation()">
                </mat-checkbox>
                <span role="button">{{ todoItem.text }}</span>
            </div>
        </div>
    </div>
</mat-expansion-panel>

<mat-menu #actionsMenu="matMenu">
    <ng-template matMenuContent let-index="index">
        <button mat-menu-item (click)="edit(index)">
            <mat-icon>edit</mat-icon>
            <span>Изменить</span>
        </button>
        <button mat-menu-item (click)="delete(index)">
            <mat-icon>delete</mat-icon>
            <span>Удалить</span>
        </button>
    </ng-template>
</mat-menu>
